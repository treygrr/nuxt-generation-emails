<mjml>
  <mj-head>
    <mj-font name="DM Sans" href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" />
    <mj-attributes>
      <mj-all font-family="'DM Sans', Arial, Helvetica, sans-serif" />
    </mj-attributes>
    <mj-preview>{{previewText}}</mj-preview>
    <mj-style>
      .order-info td { padding: 4px 0; }
      .summary-row td { padding: 4px 0; }
    </mj-style>
  </mj-head>
  <mj-body background-color="#f1f5f9">

    <!-- Store name + heading + greeting -->
    <mj-section background-color="#ffffff" padding="32px 32px 0 32px">
      <mj-column>
        <mj-text font-size="12px" font-weight="600" text-transform="uppercase" letter-spacing="0.05em" color="#4f46e5">
          {{storeName}}
        </mj-text>
        <mj-text font-size="24px" font-weight="600" color="#0f172a" padding-top="16px">
          Your order is confirmed ðŸŽ‰
        </mj-text>
        <mj-text font-size="16px" line-height="28px" color="#475569">
          Hi {{customerFirstName}}, thanks for your purchase. We're getting your order ready to ship.
        </mj-text>
      </mj-column>
    </mj-section>

    <!-- Order info box -->
    <mj-section background-color="#f8fafc" padding="20px 32px">
      <mj-column>
        <mj-text font-size="14px" color="#475569">
          Order #<span style="font-weight: 600; color: #0f172a;">{{orderNumber}}</span>
        </mj-text>
        <mj-text font-size="14px" color="#475569" padding-top="8px">
          Placed on {{orderDate}}
        </mj-text>
        <mj-text font-size="14px" color="#475569" padding-top="8px">
          Estimated delivery: <span style="font-weight: 600; color: #0f172a;">{{deliveryEstimate}}</span>
        </mj-text>
      </mj-column>
    </mj-section>

    <!-- Items heading -->
    <mj-section background-color="#ffffff" padding="32px 32px 12px 32px">
      <mj-column>
        <mj-text font-size="18px" font-weight="600" color="#0f172a">
          Items in this order
        </mj-text>
      </mj-column>
    </mj-section>

    <!-- Item list -->
    {{#each items}}
    <mj-section background-color="#ffffff" padding="8px 32px">
      <mj-column border="1px solid #e2e8f0" border-radius="6px" padding="16px">
        <mj-text font-size="14px" font-weight="500" color="#0f172a">
          {{this.name}}
        </mj-text>
        <mj-text font-size="14px" color="#475569" padding-top="4px">
          Qty {{this.quantity}} Ã— {{this.formattedUnitPrice}}
        </mj-text>
        <mj-text font-size="14px" font-weight="600" color="#0f172a" padding-top="8px">
          {{this.formattedTotal}}
        </mj-text>
      </mj-column>
    </mj-section>
    {{/each}}

    <!-- Divider + order summary -->
    <mj-section background-color="#ffffff" padding="0 32px">
      <mj-column>
        <mj-divider border-color="#e2e8f0" padding="32px 0" />
        <mj-text font-size="18px" font-weight="600" color="#0f172a" padding-bottom="12px">
          Order summary
        </mj-text>
        <mj-text font-size="14px" color="#334155">
          Subtotal: {{formattedSubtotal}}
        </mj-text>
        <mj-text font-size="14px" color="#334155" padding-top="8px">
          Shipping: {{formattedShippingCost}}
        </mj-text>
        <mj-text font-size="14px" color="#334155" padding-top="8px">
          Tax: {{formattedTax}}
        </mj-text>
        <mj-text font-size="16px" font-weight="600" color="#0f172a" padding-top="12px">
          Total: {{formattedTotal}}
        </mj-text>
      </mj-column>
    </mj-section>

    <!-- Shipping address -->
    <mj-section background-color="#ffffff" padding="32px 32px 0 32px">
      <mj-column border="1px solid #e2e8f0" border-radius="8px" padding="20px">
        <mj-text font-size="16px" font-weight="600" color="#0f172a" padding-bottom="8px">
          Shipping to
        </mj-text>
        <mj-text font-size="14px" line-height="24px" color="#334155">
          {{shippingAddress.name}}<br />
          {{shippingAddress.line1}}<br />
          {{#if shippingAddress.line2}}{{shippingAddress.line2}}<br />{{/if}}
          {{shippingAddress.city}}, {{shippingAddress.state}} {{shippingAddress.postalCode}}<br />
          {{shippingAddress.country}}
        </mj-text>
        <mj-text font-size="14px" color="#334155" padding-top="12px">
          Shipping method: {{shippingMethod}}
        </mj-text>
        <mj-text font-size="14px" color="#334155" padding-top="4px">
          Payment method: {{paymentMethod}}
        </mj-text>
      </mj-column>
    </mj-section>

    <!-- CTA -->
    <mj-section background-color="#ffffff" padding="32px">
      <mj-column>
        <mj-button href="{{orderUrl}}" background-color="#4f46e5" border-radius="6px" font-size="14px" font-weight="600" inner-padding="12px 24px">
          View order details
        </mj-button>
        <mj-text font-size="14px" color="#475569" padding-top="16px" align="center">
          Need help? Contact us at
          <a href="mailto:{{supportEmail}}" style="color: #4f46e5; text-decoration: none;">{{supportEmail}}</a>
        </mj-text>
      </mj-column>
    </mj-section>

  </mj-body>
</mjml>
